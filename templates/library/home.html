{% extends 'base.html' %} {% block heading %} Books List {% endblock heading %}
<!--  -->
{% block content %}
<!-- searchbar -->

<form class="flex sm:flex-row flex-col" action="/search/">
  <div
    class="w-full md:w-1/2 l:w-1/3 flex flex-col sm:flex-row sm:items-center"
  >
    <label class="text-lg" for="search-query">Search :</label>
    <input
      class="w-full sm:w-2/3 px-2 py-1 bg-transparent border-white border-2 mt-4 sm:mt-0 sm:ml-10 rounded text-white"
      type="text"
      name="search-query"
      id="search"
    />
  </div>
  <div class="flex space-x-4 mt-4 sm:mt-0 flex-row sm:items-center">
    <button
      class="text-white hover:shadow-md rounded bg-purple-800 px-4 py-1"
      name="author"
    >
      Search Author
    </button>
    <button
      class="text-white hover:shadow-md bg-yellow-600 rounded px-4 py-1"
      name="book"
    >
      Search Book
    </button>
  </div>
</form>

<!-- all books -->
<ul
  class="mt-10 md:px-4 lg:px-12 xl:px-0 grid grid-cols-1 md:grid-cols-3 xl:grid-cols-4"
>
  {% for book in books %}
  <li class="mb-12 md:mb-4 mx-auto text-center">
    <h2 class="text-lg font-bold">{{book.name}}</h2>
    <h4 class="text-md">{{book.author}}</h4>
    <img
      src="{{book.image.url}}"
      alt="{{book.name}}"
      height="150"
      width="150"
      class="mb-4"
    />
    {% if not user.is_superuser and not user.is_anonymous %}
    <a
      class="text-white hover:shadow-md rounded bg-blue-600 px-4 py-1"
      href="/request-book-issue/{{book.id}}/"
      >Request Issue</a
    >
    {% endif %} {% if user.is_superuser %}
    <a
      href="/deletebook/{{book.id}}/"
      class="text-white hover:shadow-md rounded bg-red-500 px-4 py-1"
      >Delete</a
    >
    {% endif %}
  </li>

  {% endfor %}
</ul>

<!-- author search results -->
{% for author in author_results %}

<div {% if not forloop.first %} class="my-8" {% endif %}>
  <h1 class="text-lg font-bold mb-2">{{author.name}}</h1>

  <ul class="list-disc px-4">
    {% for book in author.book_set.all %}
    <li>
      <div class="flex flex-row space-x-4">
        <h2>{{book.name}}</h2>
        {% if not user.is_superuser and not user.is_anonymous %}
        <a
          class="hover:shadow-md rounded text-blue-500 underline"
          href="/request-book-issue/{{book.id}}/"
          >Request Issue</a
        >
        {% endif %}
      </div>
    </li>

    {%empty %}
    <h2>Not found</h2>
    {% endfor %}
  </ul>
</div>
{% endfor %}

<!-- book results -->
<ul
  class="mt-10 md:px-4 lg:px-12 xl:px-0 grid grid-cols-2 md:grid-cols-4 justify-items-center"
>
  {% for book in books_results %}
  <li>
    <h2 class="text-lg font-bold">{{book.name}}</h2>
    <h4 class="text-md">{{book.author}}</h4>
    <img
      src="{{book.image.url}}"
      alt="{{book.name}}"
      height="150"
      width="150"
      class="mb-4"
    />
    {% if not user.is_superuser and not user.is_anonymous %}
    <a
      class="text-white hover:shadow-md rounded bg-blue-500 px-4 py-1"
      href="/request-book-issue/{{book.id}}/"
      >Request Issue</a
    >
    {% endif %} {% if user.is_superuser %}
    <a
      href="/deletebook/{{book.id}}/"
      class="text-white hover:shadow-md rounded bg-red-500 px-4 py-1"
      >Delete</a
    >
    {% endif %}
  </li>
  {% endfor %}
</ul>
{% endblock content %}
